import cover from './cover.png';

export const metadata = {
  emoji: 'âš¡ï¸',
  title: 'XSta',
  source: 'https://github.com/idootop/xsta',
  preview: 'https://www.npmjs.com/package/xsta',
  createAt: '2023-10',
  description: 'An ultra-lightweight React state management solution',
  cover: cover.src,
};

# é¡¹ç›®äº®ç‚¹

`XSta` æ˜¯ä¸€ä¸ªè¶…è½»é‡ï¼ˆ< 200 linesï¼‰çš„ React çŠ¶æ€ç®¡ç†åº“ï¼Œå®ƒæä¾›äº†ä¸åŸç”Ÿ `useState` Hook ä¸€è‡´çš„çŠ¶æ€ç®¡ç†æ¥å£ï¼Œé›¶å­¦ä¹ ã€è¿ç§»æˆæœ¬ï¼Œç»™ä½ æè‡´ä¸æ»‘çš„ React çŠ¶æ€ç®¡ç†æ–°ä½“éªŒã€‚

- **ğŸ¦ éº»é›€è™½å°ï¼Œäº”è„ä¿±å…¨** æ ¸å¿ƒä¸åˆ° 200 è¡Œä»£ç ï¼ˆåŒ…å«æ¢è¡Œå’Œæ³¨é‡Šï¼‰ï¼Œæä¾›äº†å®Œå¤‡çš„ React çŠ¶æ€ç®¡ç†è§£å†³æ–¹æ¡ˆï¼Œç”Ÿäº§ç¯å¢ƒå¯ç”¨ã€‚
- **âœ… è®© React çŠ¶æ€ç®¡ç†å˜ç®€å•** åªéœ€å°† `useState` æ›¿æ¢ä¸º `useXState`ï¼Œå³å¯å°†ç»„ä»¶å†…çŠ¶æ€å¿«é€Ÿå…±äº«ç»™å…¶ä»–çˆ¶å­ã€å…„å¼Ÿç»„ä»¶ä½¿ç”¨ï¼Œå°±è¿™ä¹ˆç®€å•ï¼
- **ğŸ’ª ä¸“æ³¨æ€§èƒ½ä¼˜åŒ–** å†…ç½®çŠ¶æ€é€‰æ‹©å™¨ï¼Œç¡®ä¿å„ä¸ªç»„ä»¶åªåœ¨å…¶å…³æ³¨çš„çŠ¶æ€æ”¹å˜æ—¶ï¼Œæ‰è§¦å‘ re-renderï¼Œè½»æ¾æå®šå¤æ‚é¡µé¢æ€§èƒ½ä¼˜åŒ–ã€‚
- **ğŸ§© é›¶å­¦ä¹ ã€è¿ç§»æˆæœ¬** å¯ä¸é¡¹ç›®ä¸­å…¶ä»–å·²ä½¿ç”¨çš„çŠ¶æ€ç®¡ç†åº“å…±å­˜ï¼Œè½»æ¾åˆ‡æ¢ï¼Œè¿ç§»æ— å¿§ã€‚

# å¹•åèŠ±çµ®

React ç”Ÿæ€å†…çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆå·²ç»æœ‰å¾ˆå¤šäº†[^1]ï¼Œåœ¨è¿‡å»çš„ä¸€äº›é¡¹ç›®å®è·µä¸­ï¼Œæˆ‘å°è¯•è¿‡è®¸å¤šçŠ¶æ€ç®¡ç†å·¥å…·ï¼Œä½†æ„Ÿè§‰ç”¨èµ·æ¥éƒ½ä¸æ˜¯å¾ˆç§°æ‰‹ï¼š

- æœ‰çš„è¦å†™å¾ˆå¤šæ¨¡ç‰ˆä»£ç ï¼Œç”¨èµ·æ¥å¾ˆç¹çï¼Œä¸å¤Ÿçµæ´»ï¼›
- æœ‰çš„éœ€è¦å­¦ä¹ æ–°çš„èŒƒå¼ï¼Œä½¿ç”¨æ—¶ä¼šå¤šä¸€äº›é¢å¤–çš„å¿ƒæ™ºè´Ÿæ‹…ã€‚

å®é™…ä¸Šï¼ŒçŠ¶æ€ç®¡ç†çš„æ ¸å¿ƒç›®æ ‡æœ‰ä¸¤ä¸ªï¼š

1. å®ç°è·¨ç»„ä»¶çš„çŠ¶æ€å…±äº«
2. çŠ¶æ€æ›´æ–°æ—¶è‡ªåŠ¨åˆ·æ–°ä¾èµ–ç»„ä»¶

åªè¦æ»¡è¶³è¿™ä¸¤ç‚¹ï¼Œæ‰€æœ‰çš„çŠ¶æ€ç®¡ç†åº“éƒ½å¯è§†ä¸ºæ˜¯ç­‰ä»·çš„ã€‚

XSta æ˜¯æˆ‘æ ¹æ®è¿‡å¾€çš„é¡¹ç›®ç»éªŒå’Œä¸šåŠ¡å®è·µï¼Œæ²‰æ·€å‡ºçš„ä¸€ç§ç›¸å¯¹ç®€æ˜“çš„çŠ¶æ€ç®¡ç†èŒƒå¼ã€‚

å®ƒè¶³å¤Ÿç²¾ç®€ï¼Œæºç ä¸åˆ° 200 è¡Œï¼Œä½“ç§¯å°åˆ°å‡ ä¹å¯ä»¥å¿½ç•¥ã€‚

åšåŠ æ³•å®¹æ˜“ï¼Œä½†æ˜¯åšå‡æ³•å´å¾ˆéš¾ï¼š

- å®ƒé€šè¿‡ 10% çš„ä½“ç§¯å®ç°äº† 99% çš„é¡¹ç›®çŠ¶æ€ç®¡ç†çš„éœ€è¦ã€‚
- å®ƒæä¾›äº†ä¸åŸç”Ÿ `useState` ä¸€è‡´çš„æ¥å£ï¼Œé›¶å­¦ä¹ æˆæœ¬ã€‚
- å®ƒæ”¯æŒä¸å…¶ä»–çŠ¶æ€ç®¡ç†åº“å…±å­˜ï¼Œé›¶å‡çº§ã€è¿ç§»æˆæœ¬ã€‚

è¿™ç§ç²¾ç®€çš„èƒŒåï¼Œæ˜¯ä¸€ç§é«˜åº¦çš„å–èˆï¼Œå’Œå¯¹ä¸šåŠ¡éœ€æ±‚çš„æ·±åˆ»ç†è§£ã€‚

æ€»çš„æ¥è¯´ï¼Œå¦‚æœä½ éœ€è¦çš„æ˜¯ä¸€ä¸ªè¶³å¤Ÿç²¾ç®€ï¼Œä½¿ç”¨æ–¹ä¾¿ï¼ˆä¸éœ€è¦å¤æ‚çš„æ¨¡ç‰ˆä»£ç ï¼Œé¢å¤–çš„å­¦ä¹ æˆæœ¬å’Œä½¿ç”¨å¿ƒæ™ºï¼‰ï¼Œå¹¶ä¸”ä¹…ç»è€ƒéªŒï¼Œæ»¡è¶³ç»å¤§å¤šæ•°é¡¹ç›®çš„çŠ¶æ€ç®¡ç†éœ€è¦çš„çŠ¶æ€ç®¡ç†åº“ï¼Œé‚£ä¹ˆ XSta å°†ä¼šæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚

[^1]: æ¯”å¦‚ï¼šReduxã€Dvaã€Zustand å’Œ Jotai ç­‰
