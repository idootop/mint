import cover from './cover.png';

export const metadata = {
  emoji: '🍉',
  title: '合成大瓜',
  source: 'https://github.com/idootop/watermelon',
  preview: 'https://mix.xbox.work',
  createAt: '2021-02',
  description: '一款小游戏，Flutter 版合成大西瓜',
  cover: cover.src,
  pinned: true,
};

# 项目预览

import img from './images/img.jpg';

import inner from './images/inner.webp';

import play from './images/play.webp';

import win from './images/win.webp';

| <TableImage src={play.src} alt='游戏首页'/>  | <TableImage src={win.src} alt='最终得分'/> |
| :------------------------------------------: | ------------------------------------------ |
| <TableImage src={inner.src} alt='多种主题'/> | <TableImage src={img.src} alt='更换贴图'/> |

# 项目亮点

- **支持自定义背景图**: 想换啥背景，随便换
- **支持修改图片素材**: 想把瓜的图片换成 idol 的头像？随便换
- **支持重力感应操控**: 天下没有合不成的大西瓜，如果有那就多摇两下手机～
- **支持反向合成小瓜**: 大瓜反向合成小瓜，逆向思维，窒息操作
- **支持只生成小/大瓜**: 每个瓜都是一样的，还有什么理由合成不了终极大瓜？
- **内置多套游戏主题**: 水果/表情/校徽随便你选，每个主题的终极 boss 都有惊喜哦

# 幕后花絮

2021 年春节前夕，一款名为「合成大西瓜」的小游戏火了。

先简单先分析一下游戏规则：

1. 玩家点击屏幕上的任意位置来放置水果
2. 当两个相同的水果碰到一起时会合成更高等级的水果
3. 通过不断合成，最终合成出大西瓜时， 玩家胜利
4. 水果超过屏幕顶部的警戒线时，游戏结束

可以看到，游戏规则还是比较简单的，我们只需要解决以下部分：

1. 同等级水果间的碰撞检测
2. 分数等级系统与游戏结束的判定
3. 同等级水果碰撞升级时的缩放动画与粒子动效
4. 监听屏幕点击事件操控水果下落位置

结合之前做过的一款小游戏的经验[^1]，我觉得完全可以自己动手实现一个。

所以 2021 年春节年假，我在家前后花了大概三天三夜的时间[^2]，最终写了个 plus 版本的合成大西瓜出来。

在技术栈上，我继续选择了 [Flutter](https://flutter.dev/) + [Flame](https://flame-engine.org/) + [Forge2D](https://github.com/flame-engine/forge2d) 的组合，顺便也实践了一把 Flutter Web[^3]，最终将这个项目打包到了全平台[^4]。

[^1]: [坠落](/projects/game/fall-down): 我做过的第一款小游戏
[^2]: 当时一直写到大年三十的晚上，小伙伴们过来拜年，我还在电脑前撸代码，给他们展示效果 :)
[^3]: Flutter Web：彼时还是预览版，网上资料相对较少，一路踩坑填坑：其中涉及到条件导包，图片在网页端的裁剪，Javascript / Dart 互调等，期间还给 [image](https://pub.dev/packages/image) 库提了个 PR，使其支持裁剪带透明通道的圆形图片。
[^4]: 支持 Web、Android、iOS、PC
